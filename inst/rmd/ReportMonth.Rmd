---
title: "England Report - *`r params$monthTitle`* "
subtitle: "**PrescRiptions**"
author: Cristina Muschitiello - NiccolÃ² Stamboglis
pagetitle: "Report `r params$monthTitle`"
date: "e-Rum2020 - 20th June 2020"
output:
    prettydoc::html_pretty:
      theme: architect
      highlight: github
      df_print: paged
      toc: true
      toc_depth: 4
      toc_float:
        collapsed: true
        smooth_scroll: true
      number_sections: false
params:
  year: year,
  month: month,
  monthName: NameMonth,
  monthTitle: monthTitle
  prefix: prefix
  geoArea: geo  
  outputFolder: outFolder
  inputFolder: inputFolder
  monthData: monthData
  settings: settings
header-includes:
- \usepackage{makeidx}
- \makeindex
- \usepackage{float} #use the 'float' package
- \floatplacement{figure}{H} #make every figure with caption = h
- \usepackage{amsmath}
- \usepackage{amssymb}
- \usepackage{amsthm}
- \usepackage{mathtools}
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
theme_set(theme_economist()) # Sets graphs themes to "The Economist" style
```

```{r dataImport, include=FALSE, echo=FALSE}

for (i in 1:length(params$monthData)){
  # print(names(dataAll)[i])
  assign(gsub("[[:digit:]]|_","",names(monthData))[i],params$monthData[[i]])
}

regionPrescriptions = PrescRiptions::generateSummaries(plpd,bnf,on = "REGION",params$settings)
bnfPrescriptions = PrescRiptions::generateSummaries(plpd,bnf,on = "BNF",params$settings)


```
## Description

This report provides summary information on prescriptions provided in `r params$geoArea ` during `r params$monthTitle `. This report is generated automatically using the package **PrescRiptions**.

### Summary

In `r params$geoArea` during `r params$monthTitle ` the following numbers were registered:

```{r table1,  include=TRUE}

knitr::kable(regionPrescriptions,
             caption = "Region Numbers") %>%
  kableExtra::kable_styling(latex_options = c("hold_position", "repeat_header","striped")
                ,bootstrap_options = c("hold_position", "repeat_header","striped", "hover", "condensed", "responsive")
  ) 
```
### Summary by BNF Code

Information on individual BNF codes can be summarised as follows.

**Prescribed items**

Prescribed items are divided by BNF code as follows

```{r, echo=FALSE, fig.width=8, fig.height=6}
# p <- ggplot(DF_Summary_BNF_Code_Month, aes(x=reorder(BNF.Chapter, -ITEMS), y=ITEMS)) + 
#   geom_bar(stat="identity", width=.5, fill="tomato3") + 
#   labs(title="Items by BNF Chapter", 
#        subtitle="England", 
#        caption="source: NHS") + 
#   theme(axis.text.x = element_text(angle=65, vjust=0.6))
# p
```